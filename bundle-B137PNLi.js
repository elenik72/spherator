const t=(t,e,n)=>t?e(t):n;function e(){const e=localStorage.getItem("pairsHistory"),n=localStorage.getItem("names");return{pairsHistory:t(e,JSON.parse,[]),names:t(n,(t=>t.split(",")),[])}}function n(){const{pairsHistory:t,names:n}=e();!function(t){t.length>0&&(document.getElementById("names").value=t.join(", "))}(n),function(t){t.length>0&&s(t[t.length-1])}(t)}function o(t,e){return e.some((e=>e.some((e=>t.some((t=>t[0]===e[0]&&t[1]===e[1]||t[0]===e[1]&&t[1]===e[0]))))))}function s(t){const e=document.getElementById("pairs-list");e.innerHTML="",t.forEach((t=>{const n=document.createElement("li");n.textContent=t[1]?`${t[0]} и ${t[1]}`:`${t[0]} без пары`,e.appendChild(n)}))}function i(){const t=document.getElementById("names").value.split(",").map((t=>t.trim())).filter((t=>""!==t));if(t.length<2)return void alert("Введите как минимум два имени.");let n;let i=0;const{pairsHistory:l}=e();do{n=r(t.slice().map((t=>({value:t,sortKey:Math.random()}))).sort(((t,e)=>t.sortKey-e.sortKey)).map((({value:t})=>t))),i++}while(o(n,l)&&i<10);!function(t,e,n){t.push(e),t.length>2&&t.shift();(function(t,e){localStorage.setItem("pairsHistory",JSON.stringify(t)),localStorage.setItem("names",e.join(","))})(t,n),s(e)}(l,n,t)}function r(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]||null]);return e}window.onload=()=>{n();document.getElementById("generate-button").addEventListener("click",function(t,e){let n=0;return(...o)=>{const s=Date.now();s-n>=e&&(t(...o),n=s)}}(i,1e3))};
